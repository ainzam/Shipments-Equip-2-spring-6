<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/template :: head}">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/main.css}" href="../static/css/main.css" />
  <title>Shipments</title>
</head>

<body>
  <section class="container">
    <header class="jumbotron" th:replace="~{fragments/template :: header}">
      Shipments Header
    </header>
    <nav class="navbar navbar-default" th:replace="~{fragments/template :: navbar}">
      Navbar
    </nav>
    <section class="card my-1" th:replace="~{fragments/template :: heading}">
      Heading
    </section>
    <table class="table table-striped table-bordered table-condensed table-responsive">
      <thead>
        <tr>
          <th scope="col" th:text="#{shipments.table.head.num}">#</th>
          <th scope="col" th:text="#{shipments.table.head.tracking.num}">Tracking number</th>
          <th scope="col" th:text="#{shipments.table.head.reception}">Reception</th>
          <th scope="col" th:text="#{shipments.table.head.receptionist}">Receptionist</th>
          <th scope="col" th:text="#{shipments.table.head.priority}">Priority</th>
          <th scope="col" th:text="#{shipments.table.head.courier}">Courier</th>
          <th scope="col" th:text="#{shipments.table.head.category}">Category</th>
          <th scope="col" th:text="#{shipments.table.head.note}">Note</th>
          <th scope="col" th:if="${filter == 'pending'}">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="shipment, iterStat : ${shipments}">
          <td th:text="${iterStat.count}">1</td>
          <td th:text="${shipment.trackingNumber}">123456</td>
          <td th:text="${shipment.receptionDate}">2023-10-26 15:00</td>
          <td th:text="${shipment.receptionist}">John Doe</td>
          <td th:text="${shipment.priority}">3</td>
          <td th:text="${shipment.courier}">Acme Delivery</td>
          <td th:text="${shipment.category}">PARTICULAR</td>
          <td th:text="${shipment.note}">Lorem ipsum dolor sit amet...</td>
          <td th:if="${shipmentStatus == 'PENDING'}">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Assign</button>
          </td>
          <td th:if="${shipmentStatus == 'IN_PROCESS'}">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Assign</button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
          <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
          <a href="/assign" class="btn btn-primary">Assign</a>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- Script to Activate the Modal -->
  <script>
    $(document).ready(function () {
      $('[data-toggle="modal"]').click(function () {
        var target = $(this).data('target');
        $(target).modal('show');
      });
    });
  </script>
</body>
</html>
